\ProvidesPackage{globaltemplate/macros}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Meta (work-in-progress things)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\red}[1]{{\color{red}#1}}
\newcommand{\todo}[1]{{\color{red}{\textbf{TODO:} \textsf{#1}}}}
% Different font for editor's work-in-progress comments.
\newcommand{\textcomment}[1]{{\color{DarkGreen}{\textbf{Comment:} \textsf{#1}}}}

\newenvironment{todolist}{%
    \color{red} \textbf{TODO:} \begin{itemize}%
    }{\end{itemize}}
\newcommand{\redout}{\bgroup\markoverwith%
    {\textcolor{red}{\rule[0.5ex]{2pt}{1.5pt}}}\ULon}
\newcommand{\greenout}{\bgroup\markoverwith%
    {\textcolor{DarkGreen}{\rule[0.5ex]{2pt}{1.5pt}}}\ULon}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Mathematics
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Mathematics comment to display in `align` environments
% at the right of the math itself.
\newcommand{\mcomment}[1]{\tag*{\color{gray}// #1}}

% Miscellaneous
\newcommand{\eps}{\varepsilon}
\newcommand{\true}{\texttt{tt}}
\newcommand{\false}{\texttt{ff}}

% Functions
\newcommand{\bigo}[1]{\mathcal{O}\left(#1\right)}
\DeclareMathOperator*{\sgn}{sgn}
\DeclareMathOperator*{\Ord}{ord}
\DeclareMathOperator*{\Image}{Im}
\DeclareMathOperator*{\preim}{\mathsf{PreIm}}
\DeclareMathOperator{\card}{\mathsf{Card}}
\newcommand{\pfrac}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\pfracsecond}[2]{\frac{\partial^2 #1}{\partial #2^2}}
\newcommand{\pfracmixed}[3]{\frac{\partial^2 #1}{\partial #2 \partial #3}}
\newcommand{\Real}[1]{\mathfrak{Re}\left[ #1 \right]}
\newcommand{\Imag}[1]{\mathfrak{Im}\left[ #1 \right]}
\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\newcommand{\oneif}[1]{\mathbbm{1}\left[#1\right]}
\newcommand{\powset}[1]{2^{#1}}

% Predicates and setbuilders
\newcommand{\Exists}[2]{\exists\left[#1 \;:\; #2\right]}
\newcommand{\Forall}[2]{\forall\left[#1 \;:\; #2\right]}
\newcommand{\set}[2]{\left\{#1 \setsep #2\right\}}
\newcommand{\setsep}{\,|\,}
\DeclareMathOperator*{\bigforall}{\scalerel*{\forall}{\sum}}
\DeclareMathOperator*{\bigexists}{\scalerel*{\exists}{\sum}}
\newcommand{\trueif}[1]{\mathbf{tt}\left[#1\right]}
\newcommand{\lam}[2]{\lambda #1 \; \mathbf{.}\; #2} % Î»-abstraction

% Operators
\newcommand{\bydef}{\overset{\text{def}}{=}}
\newcommand{\assign}{\mathrel{\mathop:}=\,}
\newcommand{\modop}{\,\%\,} % the '%' as an operator, like in Python.
\newcommand{\divs}{\,|\,}
\newcommand{\restricted}{\negmedspace\upharpoonright\negmedspace}

% Decorators
\newcommand{\mat}[1]{\mathbf{#1}}
\newcommand{\norm}[1]{\left\vert #1 \right\vert}
\newcommand{\doublenorm}[1]{\lvert\lvert #1 \rvert\rvert}
\newcommand{\doublebrack}[1]{\left\llbracket #1 \right\rrbracket}
\newcommand{\doubleround}[1]{\llparenthesis #1 \rrparenthesis}
\newcommand{\gen}[1]{\left<#1\right>}
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\ov}[1]{\overline{#1}}
\newcommand{\inv}{^{-1}}

% Calligraphic letters
\newcommand{\MA}{\mathcal{A}}
\newcommand{\MB}{\mathcal{B}}
\newcommand{\MC}{\mathcal{C}}
\newcommand{\MD}{\mathcal{D}}
\newcommand{\MH}{\mathcal{H}}
\newcommand{\ML}{\mathcal{L}}
\newcommand{\MI}{\mathcal{I}}
\newcommand{\MG}{\mathcal{G}}
\newcommand{\MQ}{\mathcal{Q}}
\newcommand{\MU}{\mathcal{U}}

% Blackboard letters (number groups/rings/fields)
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\Q}{\mathbb{Q}}

% Modal logic
\newcommand{\dia}{\diamond}
\newcommand{\bisim}{\leftrightarroweq}
\newcommand{\mequiv}{\leftrightsquigarrow}
\newcommand{\sems}{\vDash}  % Semantically entails.
\newcommand{\syns}{\vdash}  % Syntactically entails (can-be-derived-from).
\newcommand{\notsems}{\nvDash}  % NOT Semantically entails.
\newcommand{\notsyns}{\nvdash}  % NOT Syntactically entails.
\DeclareMathOperator{\MLForm}{\mathsf{Form}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Category theory
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\catname}[1]{\mathbf{#1}}
\newcommand{\cat}[1]{\mathscr{#1}}
% \DeclareMathOperator* does not work since the command has already
% been declared in a package. \operatorname* ensures it has the
% same spacing as \DeclareMathOperator*
\renewcommand{\hom}{\operatorname*{\mathsf{Hom}}}
\newcommand{\homc}{\hom_{\cat{C}}}
\newcommand{\homs}{\hom_{\Set}}
\newcommand{\homcat}{\hom_{\Cat}}
\DeclareMathOperator*{\colim}{\mathsf{colim}}
\newcommand{\Cone}{\mathsf{Cone}}
\newcommand{\presh}[1]{\widehat{#1}}    % Presheaf-category over input arg.
\newcommand{\op}{^{\mathsf{op}}}
\newcommand{\adjsuffix}{\mathsf{\text{-}Adj}}
\newcommand{\bprod}{\negmedspace\!\times\!\negmedspace}
\newcommand{\bcoprod}{\negmedspace\!+\!\negmedspace}
\newcommand{\const}{\mathsf{const}}
\newcommand{\hole}{(-)}
\newcommand{\monoid}[1]{\mathscr{#1}}
\newcommand{\slice}[2]{#1\!\downarrow\!#2}
\DeclareMathOperator*{\lan}{\mathsf{Lan}}
\DeclareMathOperator*{\ran}{\mathsf{Ran}}

% Often used concrete pieces of data
\newcommand{\id}{\mathsf{Id}}
\newcommand{\termobj}{\top}
\newcommand{\toterm}[1]{\mathbf{!}_{#1}} % Unique arrow to term object.
\newcommand{\initobj}{\bot}
\newcommand{\toinit}[1]{\mathbf{?}_{#1}} % Unique arrow to init object.
\newcommand{\prone}{\pi_1}
\newcommand{\prtwo}{\pi_2}
\newcommand{\oneset}{\mathbbm{1}}     % The canonical singleton set.
\newcommand{\oneelem}{\ast}           % The only element of the singleton set.
\newcommand{\twoset}{\mathbbm{2}}     % The canonical 2-element set.
\newcommand{\mon}{\monoid{M}}
\newcommand{\nmon}{\monoid{N}}
\newcommand{\monop}{\bullet}    % The associative binary operation of a monoid.
\newcommand{\monid}{\mathbf{1}}          % The unit element of a monoid.

% Arrows
\newcommand{\epi}{\twoheadrightarrow}
\newcommand{\mono}{\rightarrowtail}
\newcommand{\iso}{\overset{\sim}{\rightarrow}}
\newcommand{\natiso}{\tilde{\Rightarrow}}
\newcommand{\biiso}{\overset{\sim}{\longleftrightarrow}}
\newcommand{\embed}{\hookrightarrow}

% Actual categories
\newcommand{\CA}{\cat{A}}
\newcommand{\CB}{\cat{B}}
\newcommand{\CC}{\cat{C}}
\newcommand{\CD}{\cat{D}}
\newcommand{\CE}{\cat{E}}
\newcommand{\CF}{\cat{F}}
\newcommand{\CI}{\cat{I}}
\newcommand{\CJ}{\cat{J}}
\newcommand{\Set}{\ensuremath{\catname{Set}}}
\newcommand{\Mon}{\catname{Mon}} % Category of monoids and homomorphisms.
\newcommand{\Cat}{\catname{Cat}}

% Adjunction inline as diagram
\newcommand{\adj}[4]{%
    \begin{tikzcd}%
        #1 \ar[rr, bend left, "#3"] &\bot & #2 \ar[ll, bend left, "#4"]%
    \end{tikzcd}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Type theory
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\weq}{\simeq}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Hacks
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Put this before the \begin{enumerate}
% of a lemma/theorem that begins with and enumeration,
% to ensure a linebreak between the first item and the lemma's heading.
% See p 10 of the amsthm documentation.
\newcommand{\enumlemma}{\leavevmode \vspace{-\baselineskip}}

% Referable label with custom text.
% From  https://tex.stackexchange.com/questions/18191/defining-custom-labels
\makeatletter
\newcommand{\customlabel}[2]{%
   \protected@write \@auxout {}{%
       \string \newlabel {#1}{{#2}{\thepage}{#2}{#1}{}} }%
   \hypertarget{#1}{#2}
}
\makeatother


